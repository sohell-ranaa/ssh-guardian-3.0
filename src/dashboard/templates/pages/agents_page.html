<!-- SSH Guardian v3.0 - Agents Management Page -->
<div id="page-agents" class="page-content" style="display: none;">
    <!-- Page Header -->
    <div class="page-header">
        <div>
            <h2 class="page-title">Agent Management</h2>
            <p class="page-subtitle">Monitor and manage SSH Guardian agents deployed on remote servers</p>
        </div>
        <button class="refresh-btn" onclick="loadAgentsPage()">
            <span class="refresh-icon">â†»</span> Refresh
        </button>
    </div>

    <!-- Agent Statistics -->
    <div class="agent-stats-grid">
        <div class="agent-stat-card">
            <div>
                <div id="stat-total-agents" class="agent-stat-value">-</div>
                <div class="agent-stat-label">Total Agents</div>
            </div>
            <div class="agent-stat-icon blue">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="11" width="18" height="10" rx="2"/>
                    <circle cx="12" cy="5" r="3"/>
                </svg>
            </div>
        </div>

        <div class="agent-stat-card">
            <div>
                <div id="stat-online-agents" class="agent-stat-value success">-</div>
                <div class="agent-stat-label">Online</div>
            </div>
            <div class="agent-stat-icon green">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                    <polyline points="22 4 12 14.01 9 11.01"/>
                </svg>
            </div>
        </div>

        <div class="agent-stat-card">
            <div>
                <div id="stat-approved-agents" class="agent-stat-value purple">-</div>
                <div class="agent-stat-label">Approved</div>
            </div>
            <div class="agent-stat-icon purple">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                    <polyline points="9 12 11 14 15 10"/>
                </svg>
            </div>
        </div>

        <div class="agent-stat-card">
            <div>
                <div id="stat-total-events" class="agent-stat-value warning">-</div>
                <div class="agent-stat-label">Total Events</div>
            </div>
            <div class="agent-stat-icon amber">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                    <polyline points="14 2 14 8 20 8"/>
                    <line x1="16" y1="13" x2="8" y2="13"/>
                    <line x1="16" y1="17" x2="8" y2="17"/>
                </svg>
            </div>
        </div>
    </div>

    <!-- Search and Filter -->
    <div class="agent-filters">
        <div class="agent-filters-row">
            <div class="agent-search-wrapper">
                <span class="agent-search-icon">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/>
                    </svg>
                </span>
                <input type="text" id="agent-search-input" class="agent-search-input" placeholder="Search by hostname, agent ID, or IP address...">
            </div>
            <select id="agent-status-filter" class="agent-filter-select">
                <option value="all">All Status</option>
                <option value="online">Online</option>
                <option value="offline">Offline</option>
                <option value="approved">Approved</option>
                <option value="pending">Pending Approval</option>
            </select>
            <select id="agent-environment-filter" class="agent-filter-select">
                <option value="all">All Environments</option>
                <option value="production">Production</option>
                <option value="staging">Staging</option>
                <option value="development">Development</option>
                <option value="testing">Testing</option>
            </select>
            <button class="btn btn-secondary btn-sm" onclick="clearAgentFilters()">Clear Filters</button>
        </div>
        <div id="agent-filter-stats" class="agent-filter-stats">Showing all agents</div>
    </div>

    <!-- Agents List -->
    <div class="card" style="padding: 0; overflow: hidden;">
        <div class="card-header" style="margin: 0; border-radius: 6px 6px 0 0;">
            <h3 class="card-title">Registered Agents</h3>
        </div>
        <div id="agents-container" class="agents-grid">
            <div class="agent-empty-state" style="grid-column: 1 / -1;">
                <div class="agent-modal-spinner"></div>
                <p style="margin-top: 16px;">Loading agents...</p>
            </div>
        </div>
    </div>
</div>

<!-- Agent Details Modal -->
<div id="agent-details-modal">
    <div class="agent-modal-backdrop" onclick="closeAgentDetailsModal()"></div>
    <div class="agent-modal-container">
        <div class="agent-modal-header">
            <h2 class="agent-modal-title">Agent Details</h2>
            <button class="agent-modal-close" onclick="closeAgentDetailsModal()">&times;</button>
        </div>
        <div class="agent-modal-body" id="agent-details-content">
            <div class="agent-modal-loading">
                <div class="agent-modal-spinner"></div>
                <div>Loading agent details...</div>
            </div>
        </div>
    </div>
</div>
