<!-- SSH Guardian v3.0 - GeoIP Lookup Page -->
<div id="page-ip-geo" class="page-content" style="display: none;">
    <div class="page-header-with-cache">
        <div>
            <h1 class="page-title">GeoIP Intelligence</h1>
            <p class="page-subtitle">Geographic analysis for IP addresses</p>
        </div>
        <div class="page-header-actions">
            <div class="cache-indicator loading" data-cache-endpoint="geoip">
                <span class="cache-status-dot"></span>
                <span class="cache-indicator-text">Loading...</span>
                <span class="cache-time"></span>
                <button class="cache-refresh-btn" onclick="loadGeoIPPage()" title="Refresh data">‚Üª</button>
            </div>
        </div>
    </div>

    <!-- Quick Stats - Compact -->
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 12px; margin-bottom: 20px;">
        <div class="card" style="padding: 16px;">
            <div style="display: flex; align-items: center; gap: 12px;">
                <div style="width: 36px; height: 36px; background: linear-gradient(135deg, #0078D4 0%, #005A9E 100%); border-radius: 6px; display: flex; align-items: center; justify-content: center; font-size: 18px; flex-shrink: 0;">üåç</div>
                <div style="min-width: 0;">
                    <div style="font-size: 11px; color: var(--text-secondary); margin-bottom: 2px;">Total IPs</div>
                    <div id="stat-total-geoips" style="font-size: 22px; font-weight: 700;">-</div>
                </div>
            </div>
        </div>

        <div class="card" style="padding: 16px;">
            <div style="display: flex; align-items: center; gap: 12px;">
                <div style="width: 36px; height: 36px; background: linear-gradient(135deg, #10b981 0%, #059669 100%); border-radius: 6px; display: flex; align-items: center; justify-content: center; font-size: 18px; flex-shrink: 0;">üó∫Ô∏è</div>
                <div style="min-width: 0;">
                    <div style="font-size: 11px; color: var(--text-secondary); margin-bottom: 2px;">Countries</div>
                    <div id="stat-country-count" style="font-size: 22px; font-weight: 700; color: #10b981;">-</div>
                </div>
            </div>
        </div>

        <div class="card" style="padding: 16px;">
            <div style="display: flex; align-items: center; gap: 12px;">
                <div style="width: 36px; height: 36px; background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); border-radius: 6px; display: flex; align-items: center; justify-content: center; font-size: 18px; flex-shrink: 0;">üîí</div>
                <div style="min-width: 0;">
                    <div style="font-size: 11px; color: var(--text-secondary); margin-bottom: 2px;">VPN/Proxy</div>
                    <div id="stat-proxy-count" style="font-size: 22px; font-weight: 700; color: #f59e0b;">-</div>
                </div>
            </div>
        </div>

        <div class="card" style="padding: 16px;">
            <div style="display: flex; align-items: center; gap: 12px;">
                <div style="width: 36px; height: 36px; background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); border-radius: 6px; display: flex; align-items: center; justify-content: center; font-size: 18px; flex-shrink: 0;">üïµÔ∏è</div>
                <div style="min-width: 0;">
                    <div style="font-size: 11px; color: var(--text-secondary); margin-bottom: 2px;">Tor Nodes</div>
                    <div id="stat-tor-count" style="font-size: 22px; font-weight: 700; color: #ef4444;">-</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Two Column Layout -->
    <div style="display: grid; grid-template-columns: 400px 1fr; gap: 20px; margin-bottom: 20px;">
        <!-- Left: IP Lookup -->
        <div class="card">
            <div style="padding: 16px; border-bottom: 1px solid var(--border);">
                <h3 style="margin: 0; font-size: 15px; font-weight: 600;">üîç IP Address Lookup</h3>
            </div>
            <div style="padding: 16px;">
                <div style="display: flex; gap: 8px; margin-bottom: 12px;">
                    <input
                        type="text"
                        id="geoip-search-input"
                        placeholder="Enter IP (e.g., 8.8.8.8)"
                        style="flex: 1; padding: 10px 12px; border: 1px solid var(--border); border-radius: 4px; font-size: 13px; background: var(--surface);"
                        onkeypress="if(event.key === 'Enter') lookupGeoIP()"
                    >
                    <button
                        onclick="lookupGeoIP()"
                        style="padding: 10px 20px; background: var(--azure-blue); color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 13px; font-weight: 600; white-space: nowrap;"
                    >
                        Lookup
                    </button>
                </div>
                <div id="geoip-lookup-result"></div>
            </div>
        </div>

        <!-- Right: Top Countries -->
        <div class="card">
            <div style="padding: 16px; border-bottom: 1px solid var(--border);">
                <h3 style="margin: 0; font-size: 15px; font-weight: 600;">üåê Top Countries by IP Count</h3>
            </div>
            <div id="geoip-top-countries" style="padding: 16px;">
                <div style="text-align: center; padding: 20px; color: var(--text-secondary); font-size: 13px;">Loading...</div>
            </div>
        </div>
    </div>

    <!-- Recent Lookups Table - Full Width -->
    <div class="card">
        <div style="padding: 16px; border-bottom: 1px solid var(--border); display: flex; align-items: center; justify-content: space-between;">
            <h3 style="margin: 0; font-size: 15px; font-weight: 600;">üìã Recent IP Lookups</h3>
            <button onclick="loadGeoIPPage()" style="padding: 6px 12px; background: var(--surface); border: 1px solid var(--border); border-radius: 4px; cursor: pointer; font-size: 12px;">
                üîÑ Refresh
            </button>
        </div>
        <div id="geoip-recent-list" style="padding: 16px;">
            <div style="text-align: center; padding: 20px; color: var(--text-secondary); font-size: 13px;">Loading...</div>
        </div>
    </div>
</div>
